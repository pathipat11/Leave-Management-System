{% extends "leave_app/base.html" %}
{% block title %}Manager - Pending Leaves{% endblock %}

{% block content %}
<h1 class="text-2xl font-semibold tracking-tight mb-2">คำขอลาที่รออนุมัติ</h1>
<p class="mb-4 text-sm text-slate-500 dark:text-slate-400">
  แสดงเฉพาะคำขอของลูกน้องที่อยู่ภายใต้คุณ และยังอยู่ในสถานะ Pending
</p>

<table class="w-full text-sm rounded-2xl border border-slate-100 bg-white/80 shadow-sm overflow-hidden dark:border-slate-800 dark:bg-slate-900/70 ">
  <thead class="bg-slate-50 text-slate-700 dark:bg-slate-800/70 dark:text-slate-100">
    <tr>
      <th class="text-left py-2 px-3">พนักงาน</th>
      <th class="text-left px-3">ประเภท</th>
      <th class="text-left px-3">ช่วงเวลา</th>
      <th class="text-left px-3">เหตุผล</th>
      <th class="text-left px-3">จัดการ</th>
    </tr>
  </thead>
  <tbody>
    {% for leave in leaves %}
    <tr class="border-t border-slate-100 dark:border-slate-800">
      <td class="py-2 px-3">
        {{ leave.employee.user.get_full_name|default:leave.employee.user.username }}
      </td>
      <td class="px-3">{{ leave.leave_type.name }}</td>
      <td class="px-3">{{ leave.start_date }} - {{ leave.end_date }}</td>
      <td class="px-3 truncate max-w-xs">
        {{ leave.reason|truncatechars:50 }}
      </td>
      <td class="px-3">
        <a href="{% url 'leave_app:manager_leave_detail' leave.pk %}"
          class="text-xs font-medium text-blue-600 hover:text-blue-500">
          ดูรายละเอียด
        </a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="5" class="py-3 text-center text-slate-500 dark:text-slate-400">
        ยังไม่มีคำขอที่รออนุมัติ
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}